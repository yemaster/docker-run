<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %} - Docker Run</title>
    <link href="/static/css/tailwind.min.css" rel="stylesheet">
    <link href="/static/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/main.css" rel="stylesheet">
    {% block header %}{% endblock %}
</head>

<body class="bg-gray-100 min-h-screen">
    <nav class="bg-white shadow-md py-3 px-6 mb-12 transition-all duration-300">
        <div class="container mx-auto flex justify-between items-center">
            <div class="font-semibold text-gray-800 text-lg">{% block nav_title %}Docker Run{% endblock %}</div>

            <div class="flex space-x-6">
                <a href="{{ url_for('main.index') }}" class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-home mr-1"></i> 首页
                </a>

                <a href="{{ url_for('template.market') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-th-list mr-1"></i> 模板广场
                </a>

                <a href="{{ url_for('container.get_list') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-server mr-1"></i> 我的容器
                </a>

                {% if is_admin %}
                <a href="{{ url_for('template.get_list') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-file-text-o mr-1"></i> 模板管理
                </a>
                <a href="{{ url_for('logs.logs_list') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-history mr-1"></i> 日志
                </a>
                <a href="{{ url_for('auth.logout') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-sign-out mr-1"></i> 登出
                </a>
                {% else %}
                <a href="{{ url_for('auth.login') }}"
                    class="text-gray-600 hover:text-gray-900 transition-colors duration-200 flex items-center">
                    <i class="fa fa-sign-in mr-1"></i> 登录
                </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div id="toastContainer" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>
    <div id="confirmModal"
        class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-lg max-w-md w-full mx-auto transform transition-all duration-150 scale-95 opacity-0"
            id="confirmModalContent">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-800" id="confirmModalTitle">确认操作</h3>
            </div>

            <!-- 内容区域 - 根据类型显示不同内容 -->
            <div class="p-6">
                <p class="text-gray-600 confirm-message" id="confirmModalContentText">确认要执行此操作吗？</p>

                <div class="confirm-input hidden">
                    <label for="confirmInputField" class="block text-sm font-medium text-gray-700 mb-1"
                        id="confirmInputLabel">输入内容：</label>
                    <input type="text" id="confirmInputField"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all">
                </div>
            </div>

            <div class="px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3">
                <button type="button"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors duration-200"
                    id="confirmModalCancel">
                    取消
                </button>
                <button type="button"
                    class="px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-800 transition-colors duration-200"
                    id="confirmModalConfirm">
                    确认
                </button>
            </div>
        </div>
    </div>
    <div id="loaderOverlay" class="fixed inset-0 bg-black bg-opacity-70 z-40 hidden flex items-center justify-center transition-all duration-150 scale-95 opacity-0">
        <div class="bg-white rounded-lg px-6 py-12 max-w-sm w-full text-center">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-700 mb-4">
            </div>
            <h3 class="text-lg font-medium text-gray-800 mb-2" id="loaderTitle">加载中..</h3>
            <p class="text-gray-600" id="loaderContent"></p>
        </div>
    </div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="container mx-auto max-w-6xl px-6 mb-9">
        <div class="bg-white border-l-4 border-grey-400 shadow-sm p-4 rounded-r-md">
            <ul class="text-gray-700">
                {% for message in messages %}
                <li class="flex items-start">
                    <i class="fa fa-info-circle mt-1 mr-2 text-grey-500"></i>
                    <span>{{ message }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}
    {% endwith %}

    <main class="container mx-auto px-6 pb-12">
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-white border-t border-gray-200 py-4 mt-8">
        <div class="container mx-auto px-6 text-center text-gray-500 text-sm">
            © {% block footer_year %}
            <script>document.write(new Date().getFullYear());</script>{% endblock %} {% block footer_text %}Docker Run{%
            endblock %}
        </div>
    </footer>

    <script>
        const host_ip = "{{ host_ip }}";
    </script>
    <script src="/static/js/main.js"></script>

    {% block scripts %}{% endblock %}
</body>

</html>